<form (ngSubmit)="doSubmit()" #form="ngForm">
<div class="layout is-flex has-islands">
  <div class="island--full-width island--full-width-sidebar">
    <div class="config-title">
      Filters
    </div>
    <a href="https://github.com/Dynatrace/davis-server/wiki/Getting%20Started" target="_blank" class="config-help">
      {{ iConfig.helpLinkText }}
    </a>
  </div>
  <div *ngIf="iConfig.status['user'].success === false" class="island--full-width island--error island--full-width-sidebar island--my-account-error">
    {{ iConfig.status['filters'].error }}
  </div>
  <div class="island--full-width island--full-width-sidebar">
    <div class="island island--center island--left island--my-account">
      <div class="layout is-flex has-islands island--half">
        <div class="layout__container layout--half">
          <div class="island island--half island--half--left">
            <label for="first" class="label">
              First Name
            </label>
            <input type="text" name="first"
              class="inputfield" id="first"
              *ngIf="isMyUser"
              [(ngModel)]="iDavis.values.user.name.first" 
              (keyup)="validate()" required>
          </div>
        </div>
        <div class="layout__container layout--half">
          <div class="island island--half island--half--right">
            <label for="last" class="label">
              Last Name
            </label>
            <input type="text" name="last" 
              class="inputfield" id="last"
              *ngIf="isMyUser"
              [(ngModel)]="iDavis.values.user.name.last" 
              (keyup)="validate()" required>
          </div>
        </div>
      </div>
      <div class="island island--full">
        <label for="email" class="label">
          Email
        </label>
        <input type="email" name="email" 
          class="inputfield" id="email"
          *ngIf="isMyUser"
          [(ngModel)]="iDavis.values.user.email" 
          (keyup)="validate()" 
          [attr.disabled]="(iConfig.isWizard) ? null : ''" required>
      </div>
      <div class="island island--full">
        <div class="layout__container layout--half">
          <div class="island island--half island--half--right">        
            <label for="timezone" class="label">
              Timezone
            </label>
            <select *ngIf="isMyUser" id="timezone" name="timezone" 
              [(ngModel)]="iDavis.values.user.timezone"
              (ngModelChange)="onTimezoneChange($event); validate()"
              [class.select-opened]="isSelectOpened" 
              (click)="isSelectOpened = !isSelectOpened" 
              (blur)="isSelectOpened = false;" required>
              <option *ngFor="let tz of iConfig.timezones" [value]="tz">{{tz}}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="layout is-flex has-islands island--half">
        <div class="layout__container layout--half layout--half--small" [class.checkbox--admin]="!iConfig.isWizard && iDavis.isAdmin">
          <div class="island island--half island--half--left" style="padding-top: 14px;" *ngIf="!iConfig.isWizard && iDavis.isAdmin">  
            <input type="checkbox" class="switch to-right" id="admin" name="admin"
              [(ngModel)]="iDavis.values.user.admin"
              [attr.disabled]="(iConfig.isWizard) ? true : null"
              (change)="validate()" />
            <label for="admin" class="switch__label">
              <span class="switch__caption">Test</span>
            </label>
          </div>
        </div>
      </div>
      <div class="island island--full" *ngIf="!iConfig.isWizard && !isMyUser && iDavis.isAdmin && !isNewUser">
        <button type="button" class="btn btn--secondary btn--secondary--delete"
            [attr.disabled]="(iConfig.isWizard) ? true : null"
            (click)="clearAll()">
            Clear all
        </button>
      </div>
      <div class="island island--center island--submit">
        <button type="submit" class="btn btn--primary btn--submit"
            [attr.disabled]="(!form.valid || submitButton === 'Saving...' || !isDirty) ? true : null">
            {{ submitButton }}
        </button>
      </div>
    </div>
  </div>
</div>
</form>
   
