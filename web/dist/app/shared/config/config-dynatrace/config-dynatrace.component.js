"use strict";var __decorate=this&&this.__decorate||function(e,i,t,a){var n,r=arguments.length,o=r<3?i:null===a?a=Object.getOwnPropertyDescriptor(i,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,i,t,a);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(o=(r<3?n(o):r>3?n(i,t,o):n(i,t))||o);return r>3&&o&&Object.defineProperty(i,t,o),o},__metadata=this&&this.__metadata||function(e,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,i)},core_1=require("@angular/core"),config_service_1=require("../config.service"),davis_service_1=require("../../davis.service"),_=require("lodash"),ConfigDynatraceComponent=function(){function e(e,i){this.iDavis=e,this.iConfig=i,this.submitted=!1,this.submitButton=this.iDavis.isWizard?"Continue":"Save",this.isDirty=!1}return e.prototype.doSubmit=function(){var e=this;this.submitButton="Saving...",this.iDavis.connectDynatrace().then(function(i){i.success?e.iDavis.validateDynatrace().then(function(i){i.success?(e.iDavis.config.dynatrace.success=!0,e.iConfig.SelectView("alexa")):(e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error=i.message,e.submitButton=e.iDavis.isWizard?"Continue":"Save")},function(i){e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error="Sorry an error occurred, please try again.",e.submitButton=e.iDavis.isWizard?"Continue":"Save"}).catch(function(i){e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error="Sorry an error occurred, please try again.",e.submitButton=e.iDavis.isWizard?"Continue":"Save"}):(e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error=i.message,e.submitButton=e.iDavis.isWizard?"Continue":"Save")},function(i){e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error="Sorry an error occurred, please try again.",e.submitButton=e.iDavis.isWizard?"Continue":"Save"}).catch(function(i){e.iDavis.config.dynatrace.success=!1,e.iDavis.config.dynatrace.error="Sorry an error occurred, please try again.",e.submitButton=e.iDavis.isWizard?"Continue":"Save"}),this.submitted=!0},e.prototype.validate=function(){this.isDirty=!_.isEqual(this.iDavis.values.dynatrace,this.iDavis.values.original.dynatrace)},e.prototype.keySubmit=function(e){13===e&&this.doSubmit()},e.prototype.ngOnInit=function(){document.getElementsByName("url")[0].focus()},e}();ConfigDynatraceComponent=__decorate([core_1.Component({moduleId:module.id,selector:"config-dynatrace",templateUrl:"./config-dynatrace.component.html"}),__metadata("design:paramtypes",[davis_service_1.DavisService,config_service_1.ConfigService])],ConfigDynatraceComponent),exports.ConfigDynatraceComponent=ConfigDynatraceComponent;
//# sourceMappingURL=../../../../maps/app/shared/config/config-dynatrace/config-dynatrace.component.js.map
