"use strict";var __decorate=this&&this.__decorate||function(e,t,i,o){var n,s=arguments.length,a=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),router_1=require("@angular/router"),davis_service_1=require("../../shared/davis.service"),AuthLoginComponent=function(){function e(e,t){this.iDavis=e,this.router=t,this.submitted=!1,this.loginError=null,this.password="",this.submitButton="Sign in",this.iDavis.titleGlobal=""}return e.prototype.login=function(e){var t=this;this.submitted=!0,this.submitButton="Signing in...",this.iDavis.values.authenticate.email=e.value.email,this.iDavis.values.authenticate.password=e.value.password,this.iDavis.getJwtToken().then(function(i){i.success?(t.submitButton="Sign in",t.loginError=null,t.iDavis.token=i.token,t.iDavis.isAuthenticated=!0,t.iDavis.isAdmin=i.admin,sessionStorage.removeItem("email"),sessionStorage.removeItem("token"),sessionStorage.removeItem("isAdmin"),sessionStorage.setItem("email",e.value.email),sessionStorage.setItem("token",i.token),sessionStorage.setItem("isAdmin",i.admin),t.router.navigate(["/configuration"])):(t.submitButton="Sign in",t.loginError=i.message,t.password="")})},e}();AuthLoginComponent=__decorate([core_1.Component({moduleId:module.id,selector:"auth-login",templateUrl:"./auth-login.component.html"}),__metadata("design:paramtypes",[davis_service_1.DavisService,router_1.Router])],AuthLoginComponent),exports.AuthLoginComponent=AuthLoginComponent;
//# sourceMappingURL=../../../maps/app/auth/auth-login/auth-login.component.js.map
